<div style="margin-top: 20px;">
    <a *ngIf="appId" routerLink="/apps/{{ appType }}/{{ appId }}">
        <span class="fa fa-arrow-left"></span>
        <span style="margin-left: 5px;">Back to {{ appTypeCapitalized }} view</span>
    </a>
</div>

<p-panel styleClass="log-tail-panel" [style]="{ 'margin-top': '10px' }">
    <p-header>
        <div style="display: flex; justify-content: space-between;">
            <span class="ui-panel-title" style="margin-top: 5px; display: inline-block;">
                {{ panelTitle }}
            </span>
            <span>
                <p-button
                    style="margin-left: 5px;"
                    icon="pi pi-plus"
                    pTooltip="Fetch and present more logs."
                    (click)="fetchMoreLog()"
                ></p-button>
                <p-button
                    style="margin-left: 5px;"
                    icon="pi pi-minus"
                    pTooltip="Fetch and present less logs."
                    [disabled]="maxLength <= maxLengthChunk"
                    (click)="fetchLessLog()"
                ></p-button>
                <p-button
                    style="margin-left: 5px;"
                    icon="pi pi-refresh"
                    pTooltip="Refresh logs without changing the length of the presented data."
                    (click)="fetchLogTail()"
                ></p-button>
            </span>
        </div>
    </p-header>
    <div *ngIf="loaded && (!contents || contents.length === 0)">(empty)</div>
    <div *ngIf="contents && contents.length > 1">...</div>
    <div *ngFor="let line of contents; let i = index">
        <span *ngFor="let block of parseLogLine(line)" style="color:{{ logSeverityColor(block) }}">
            {{ i > 0 || contents.length === 1 ? block : '' }}
        </span>
    </div>

    <p-progressSpinner
        *ngIf="!loaded"
        [style]="{ width: '30px', height: '30px', 'vertical-align': 'top', 'margin-right': '20px' }"
        strokeWidth="6"
        fill="#000000"
        animationDuration=".5s"
    ></p-progressSpinner>

    <p-footer>
        <div style="display: flex; justify-content: right;">
            <p-button
                style="margin-left: 5px;"
                icon="pi pi-refresh"
                pTooltip="Refresh logs without changing the length of the presented data."
                (click)="fetchLogTail()"
            ></p-button>
        </div>
    </p-footer>
</p-panel>
